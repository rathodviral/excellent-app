<mat-sidenav-container class="example-container" (backdropClick)="closeCartSideBar('backdrop')">
  <mat-sidenav class="example-sidenav" #sidenav (keydown.escape)="closeCartSideBar('escape')" disableClose position="end">
    <app-cart (closeCart)="closeCartSideBar($event)"></app-cart>
  </mat-sidenav>
  <mat-sidenav-content>
    <app-header (loginDisplay)="closeLoginDialog($event)"></app-header>
    <main>
      <app-sub-header></app-sub-header>
      <section class="mt-30">
        <div class="container">
          <!-- <app-service-page [page]="'radio'"></app-service-page> -->
          <div class="row">
            <div class="col s3 hide-on-med-and-down">
              <!-- <app-filters [filters]="filters" [servicePage]="page" (geographyData)="getGeographyFilteredData($event)"
                (otherFilterData)="getOtherFilteredData($event)"></app-filters> -->
              <div class="filter">
                <ul class="collapsible active" data-collapsible="expandable">
                  <mat-accordion [multi]="true">
                    <mat-expansion-panel [expanded]="true">
                      <mat-expansion-panel-header>
                        <mat-panel-title>
                          <i class="material-icons">place</i> Geography
                        </mat-panel-title>
                        <!-- <mat-panel-description>
                            Type your name and age
                          </mat-panel-description> -->
                      </mat-expansion-panel-header>
                      <div class="search-input-box">
                        <i class="material-icons">search</i>
                        <!-- <p-autoComplete [(ngModel)]="searchLocation" [suggestions]="searchResults" (completeMethod)="geographyDataSearch($event)"
                            [multiple]="true" field="LocationName" (onSelect)="geographyDataChange()" (onUnselect)="geographyDataChange()"></p-autoComplete> -->
                        <span *ngFor="let item of searchLocation; let i = index;">{{item.LocationName}} <b (click)="removeSearchLocation(i)">X</b></span>
                        <mat-form-field>
                          <input type="text" matInput [formControl]="myControl" [matAutocomplete]="auto">
                        </mat-form-field>
                        <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
                          <mat-option *ngFor="let option of searchResults" [value]="option">
                            {{option.LocationName}}
                          </mat-option>
                        </mat-autocomplete>
                      </div>
                    </mat-expansion-panel>
                    <mat-expansion-panel [expanded]="true">
                      <mat-expansion-panel-header>
                        <mat-panel-title>
                          <i class="fa fa-language "></i> Language
                        </mat-panel-title>
                      </mat-expansion-panel-header>
                      <div class="search-sidebar-small">
                        <i class="material-icons">search</i>
                        <input type="text" name="Search" class="search-input" placeholder="Search Language" [(ngModel)]="language" />
                      </div>
                      <div class="filter-data">
                        <p *ngFor="let item of filters?.language | filter:{name : language}">
                          <input type="checkbox" class="filled-in" id="language{{item.filterValueId}}" [value]="item.filterValueId"
                            (change)="otherFilterDataChange($event,'languages', item.filterValueId, 'filter')" />
                          <label for="language{{item.filterValueId}}">{{item.filterValueName}}</label>
                        </p>
                      </div>
                    </mat-expansion-panel>
                    <mat-expansion-panel [expanded]="true">
                      <mat-expansion-panel-header>
                        <mat-panel-title>
                          <i class="fa fa-rss "></i> Station
                        </mat-panel-title>
                      </mat-expansion-panel-header>
                      <div class="search-sidebar-small">
                        <i class="material-icons">search</i>
                        <input type="text" name="Search" class="search-input" placeholder="Search Station" [(ngModel)]="radioStation" />
                      </div>
                      <div class="filter-data">
                        <p *ngFor="let item of filters?.radiostation | filter:{name : radioStation}">
                          <input type="checkbox" class="filled-in" id="station{{item.filterValueId}}" [value]="item.filterValueId"
                            (change)="otherFilterDataChange($event,'station', item.filterValueId, 'filter')" />
                          <label for="station{{item.filterValueId}}">{{item.filterValueName}}</label>
                        </p>
                      </div>
                    </mat-expansion-panel>
                    <mat-expansion-panel [expanded]="true">
                      <mat-expansion-panel-header>
                        <mat-panel-title>
                          <i class="fa fa-rss "></i> Tier
                        </mat-panel-title>
                      </mat-expansion-panel-header>
                      <div class="search-sidebar-small">
                        <i class="material-icons">search</i>
                        <input type="text" name="Search" class="search-input" placeholder="Search Tier" [(ngModel)]="searchTier" />
                      </div>
                      <div class="filter-data">
                        <p *ngFor="let item of filters?.tier | filter:{name : searchTier}">
                          <input type="checkbox" class="filled-in" id="tier{{item.filterValueId}}" [value]="item.filterValueId"
                            (change)="otherFilterDataChange($event,'tier', item.filterValueId, 'filter')" />
                          <label for="tier{{item.filterValueId}}">{{item.filterValueName}}</label>
                        </p>
                      </div>
                    </mat-expansion-panel>
                    <mat-expansion-panel [expanded]="true">
                      <mat-expansion-panel-header>
                        <mat-panel-title>
                          <i class="fa fa-rss "></i> Zone
                        </mat-panel-title>
                      </mat-expansion-panel-header>
                      <div class="search-sidebar-small">
                        <i class="material-icons">search</i>
                        <input type="text" name="Search" class="search-input" placeholder="Search Zone" [(ngModel)]="searchZone" />
                      </div>
                      <div class="filter-data">
                        <p *ngFor="let item of filters?.zone | filter:{zoneName : searchZone}">
                          <input type="checkbox" class="filled-in" id="zone{{item.zoneId}}" [value]="item.zoneId"
                            (change)="otherFilterDataChange($event,'zone', item.zoneId, 'filter')" />
                          <label for="zone{{item.zoneId}}">{{item.zoneName}}</label>
                        </p>
                      </div>
                    </mat-expansion-panel>
                    <mat-expansion-panel [expanded]="true">
                      <mat-expansion-panel-header>
                        <mat-panel-title>
                          <i class="fa fa-rss "></i> Options Type
                        </mat-panel-title>
                      </mat-expansion-panel-header>
                      <div class="search-sidebar-small">
                        <i class="material-icons">option</i>
                        <input type="text" name="Search" class="search-input" placeholder="Search Option" [(ngModel)]="optionType" />
                      </div>
                      <div class="filter-data">
                        <p *ngFor="let item of filters?.optionType | filter:{optionName : optionType}; let i=index">
                          <input type="radio" name="optionType" [checked]="i === 0" class="filled-in" id="zone{{item.optionCode}}"
                            [value]="item.optionCode" (change)="otherFilterDataChange($event,'optionType', item.optionCode, 'param')" />
                          <label for="zone{{item.optionCode}}">{{item.optionName}}</label>
                        </p>
                      </div>
                    </mat-expansion-panel>
                  </mat-accordion>
                </ul>
              </div>
            </div>
            <div class="col s12 m12 l9">
              <!-- <app-filtered-data [filteredData]="filteredData" [filterDataNew]="filterDataNew" [priceOption]="priceOption"
                (loadMore)="loadMoreData($event)"></app-filtered-data> -->
              <div class="white-box">
                <div class="row">
                  <div class="col s12">
                    <div class="table-responsive">
                      <table *ngIf="dataSource?.data.length > 0;else noFilteredData" mat-table [dataSource]="dataSource"
                        matSort matSortActive="productName" matSortDisableClear matSortDirection="asc" class="mat-elevation-z8">

                        <ng-container matColumnDef="select">
                          <th mat-header-cell *matHeaderCellDef>
                            <mat-checkbox (change)="$event ? masterToggle() : null" [checked]="selection.hasValue() && isAllSelected()"
                              [indeterminate]="selection.hasValue() && !isAllSelected()">
                            </mat-checkbox>
                          </th>
                          <td mat-cell *matCellDef="let row">
                            <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? checkBoxSelection(row) : null"
                              [checked]="selection.isSelected(row)">
                            </mat-checkbox>
                          </td>
                        </ng-container>

                        <ng-container matColumnDef="productName">
                          <th mat-header-cell *matHeaderCellDef mat-sort-header> Product Name </th>
                          <td mat-cell *matCellDef="let element">
                            <a href="javascript:void(0)" [routerLink]="['./', element['alias']]">{{element['productName']}}</a>
                          </td>
                        </ng-container>

                        <ng-container matColumnDef="cityName">
                          <th mat-header-cell *matHeaderCellDef mat-sort-header> City </th>
                          <td mat-cell *matCellDef="let element"> {{element.cityName}} </td>
                        </ng-container>

                        <ng-container matColumnDef="frequency">
                          <th mat-header-cell *matHeaderCellDef mat-sort-header> Frequency </th>
                          <td mat-cell *matCellDef="let element"> {{element.frequency}} </td>
                        </ng-container>

                        <ng-container matColumnDef="targetAudience">
                          <th mat-header-cell *matHeaderCellDef mat-sort-header> Audience </th>
                          <td mat-cell *matCellDef="let element"> {{element.targetAudience}} </td>
                        </ng-container>
                        <ng-container matColumnDef="price">
                          <th mat-header-cell *matHeaderCellDef mat-sort-header> Price </th>
                          <td mat-cell *matCellDef="let element">
                            <p *ngIf="isTokenAvailable(); else tokenNot">{{element?.productOption[priceOption]?.optionPrice?.defaultPrice?.price}}</p>
                            <ng-template #tokenNot>
                              <a href="javascript:void(0)" (click)="openLoginDialog(element)">Login to View Rates</a>
                            </ng-template>
                          </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="selection.toggle(row)">
                        </tr>
                      </table>
                      <div class="col s12">
                        <button style="text-align: center" (click)="loadFilterData()">Load More</button>
                      </div>
                      <ng-template #noFilteredData>
                        <div class="col s12">
                          <h5 style="text-align: center">No data found</h5>
                        </div>
                      </ng-template>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
    <app-footer></app-footer>
    <div class="fixed-action-btn " style="bottom: 35px; right: 5px;">
      <a data-activates="add-dashbord" class="button-collapse2 btn-floating btn-large" (click)="cartDisplayCheck()">
        <i class="material-icons">add</i>
      </a>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>